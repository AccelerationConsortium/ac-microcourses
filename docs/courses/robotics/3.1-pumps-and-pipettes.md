# 1. Pumps and Pipettes

```{contents}
:depth: 3
```

## ðŸ”° Tutorial

In this module, you will develop software to:
1. manage a peristaltic pumpâ€™s operations using a microcontroller and motor driver
2. manipulate the linear actuator of the Digital Pipette

### Peristaltic Pump

First, you will manage a peristaltic pumpâ€™s operations using a microcontroller and motor driver. Consider purchasing the hardware and setting it up yourself to enhance the experience. Hardware is optional for the completion of this module.

#### Bill of Materials

- [MDD3A DC Motor Driver](https://www.cytron.io/p-3amp-4v-16v-dc-motor-driver-2-channels)
- [Raspberry Pi Pico WH](https://www.raspberrypi.com/products/raspberry-pi-pico/?variant=raspberry-pi-pico-wh)
- [USB-A to micro USB-B cable](https://www.digikey.ca/en/products/detail/stewart-connector/SC-2AMK003F/8544577)
- [Adafruit Terminal PiCowbell for Pico with Pre-Soldered Sockets](https://www.adafruit.com/product/5907)
- [12V Peristaltic Pump](https://www.adafruit.com/product/1150)  (alternative: [5V peristaltic pump](https://www.adafruit.com/product/3910), but requires sufficient 5V power supply | optional: [silicone tubing](https://www.adafruit.com/product/3659))
- [12V 3A power supply](https://www.digikey.ca/en/products/detail/xp-power/VEL36US120-US-JA/6220849) (alternative: [12V 1A version](https://www.digikey.ca/en/products/detail/xp-power/VEL12US120-US-JA/5726833))
- [Jack to bare wire](https://www.digikey.ca/en/products/detail/tensility-international-corp/10-02247/6412282)
- [Alligator clip to female jumper wire pack](https://www.adafruit.com/product/4304) (only 2 required)
- [M/F silicone jumper wires](https://www.adafruit.com/product/5837) (non-silicone also OK, only 4 required)
- [Mini flathead screwdriver set](https://www.amazon.ca/dp/B08QCT9NHY/) (one for DC Motor driver terminals and a smaller one for PiCowbell terminals)
- [OPTIONAL] [Plastic beakers](https://www.amazon.ca/Measuring-Graduated-Polypropylene-Laboratory-Experiments/dp/B083JC39W8)
- [OPTIONAL] [Blue food coloring](https://www.amazon.ca/Club-House-Food-Colour-Preparation/dp/B00HVVNFPI/)
<!-- - [OPTIONAL] [Glycerin](https://www.amazon.ca/NOW-Vegetable-Glycerine-Liquid-118ml/dp/B00PUX5SF4/) (low vapor pressure for longer-running setups, alternative: water) -->

#### 

âœ… Read the [MDD3A DC Motor Driver datasheet](https://docs.google.com/document/d/1ax3gSo0srTzoSr2bo8ETLym0OqrYjlk_JCZK4kxtfXg/edit?usp=sharing)

âœ… Read [PWM](https://en.wikipedia.org/wiki/Pulse-width_modulation)

âœ… Read [Control LED brightness with PWM](https://projects.raspberrypi.org/en/projects/getting-started-with-the-pico/7)

âœ… Read [machine.PWM](https://docs.micropython.org/en/latest/rp2/quickref.html#pwm-pulse-width-modulation)

Use your knowledge, the documentation above, and any relevant datasheets to set up the circuit to control the peristaltic pump. After setting up the hardware, run the following code on the microcontroller (ensure you select the appropriate PWM Pin):

```python
from machine import Pin, PWM
from time import sleep

pwm = PWM(Pin(0))

pwm.freq(1000)

pwm.duty_u16(16384)  # 25% duty cycle
sleep(5)  # 5 seconds

pwm.duty_u16(0)  # stop the motor
```

You should observe the peristaltic pump turn on for five seconds.

### Digital Pipette

Next, you will control the linear actuator of the "Digital Pipette" to carry out precise dispensing.

#### Bill of Materials

Based on https://github.com/ac-rad/digital-pipette

- [Actuonix L16-100-63-6-R](https://www.actuonix.com/l16-100-63-6-r)
- [Raspberry Pi Pico WH](https://www.raspberrypi.com/products/raspberry-pi-pico/?variant=raspberry-pi-pico-wh)
- [1705 Pcs Machine Screw Assortment Kit, M2 M3 M4 M5](https://www.amazon.ca/Machine-Assortment-Metric-Washers-Button/dp/B0C3926M1B/). Only the following are needed:
  - M3 10 mm screws (3)
  - M3 20 mm screw (1)
  - M3 nuts (4)
- [Shunt Regulator: Fine-Adjust LV, 1.50Î©, 15W](https://www.pololu.com/product/3778)
- [6V Step-Up Voltage Regulator U3V70F6](https://www.pololu.com/product/2892)
- [5V wall adapter](https://www.digikey.ca/en/products/detail/phihong-usa/PSAA05A-050QL6-R/6560437)
- [3D printed parts](https://github.com/ac-rad/digital-pipette/tree/main/design/stl) (if you don't want to print these yourself, STL files can be uploaded to [Shapeways](https://www.shapeways.com/), [Protolabs Network](https://www.hubs.com/), [Xometry](https://www.xometry.com/), or similar. You can use white PLA filament)
- [Electrical wire (3 feet, black)](https://www.digikey.ca/en/products/detail/cnc-tech/10981-18-1-2000-001-1-TD/17799168)
- [Electrical wire (3 feet, red)](https://www.digikey.ca/en/products/detail/cnc-tech/10981-18-1-2000-004-1-TD/17799190)
- [Wire cutter/stripper combo](https://www.amazon.ca/Professional-crimping-Multi-Tool-Stripper-Multi-Function/dp/B073YG65N2)
- [Mini flathead screwdriver set](https://www.amazon.ca/dp/B08QCT9NHY/) (one for regulators and a smaller one for PiCowbell terminals)

## ðŸš€ Quiz

::::{tab-set}
:sync-group: category

:::{tab-item} Sp/Su 2024
:sync: sp2024

[URL]
:::

::::


## ðŸ“„ Assignment

Create a script that allows you to set the power as a fraction and then perform a calibration to determine a power to flow rate conversion for the peristaltic pump.

âœ… See an example calibration procedure in [Peristaltic Pump Calibration](https://docs.google.com/spreadsheets/d/18t2_kxa8xe1a8FoVrQRKD_lHAqVDYKhnHKoxriJCWNc/edit?usp=sharing).

::::{tab-set}
:sync-group: category

:::{tab-item} Sp/Su 2024
:sync: sp2024

[URL]
:::

::::